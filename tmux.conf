### general setup
# Make it use C-a, similar to screen.
unbind C-b
set -g prefix C-a
# allow inner tmux session, C-a C-a <cmd> to talk to inner session
bind-key C-a send-prefix

set -g status-keys vi
set -g mode-keys vi
set -g history-limit 10000

# set the terminal to support 256 colors
set -g default-terminal "screen-256color"

# Set no delay time when execting a commeand, e.g. switch pane and go up is 
# history.
set -g repeat-time 0

# enable wm window titles
#set -g set-titles on

### key bindings
# toggle statusbar
bind-key b set-option status

# switch panes like vi
bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R
# split window as vi
bind-key v split-window -v
bind-key s split-window -h
# copy as in vi: comment out since this destroys block selection
#bind-key -t vi-copy v begin-selection
#bind-key -t vi-copy y copy-selection
#bind-key -t vi-copy C-v rectangle-toggle

# in case of remain-on-exit is on, pane needs to be respawned
bind-key F5 respawn-pane
#####

### window options
# set window notifications
#set-window-option -g monitor-activity on
set-window-option -g automatic-rename off
set-window-option -g allow-rename off
###


# native powerline
set-option -g status on
set-option -g status-interval 2
set-option -g status-utf8 on
set-option -g status-justify "centre"
set-option -g status-left-length 60
set-option -g status-right-length 90
set-option -g status-left "#(~/.tmux-powerline/powerline.sh left)"
set-option -g status-right "#(~/.tmux-powerline/powerline.sh right)"
# --- stolen from powerline
set -g window-status-format "#[fg=colour244,bg=colour234]#I #[fg=colour240] #[default]#W "
set -g window-status-current-format "#[fg=colour234,bg=colour31]#[fg=colour117,bg=colour31] #I  #[fg=colour231,bold]#W #[fg=colour31,bg=colour234,nobold]"
# -----
# Why do I need to set this here again?
set-option -g status-bg colour234
set-option -g status-fg colour231

####################################
### FROM HERE: considered obselete!#
####################################
# THEME
#set -g status-bg black
#set -g status-fg white
#set -g status-interval 60
#set -g status-left-length 30
#set -g status-left '#[fg=green](#S) #(whoami)@#H#[default]'
#set -g status-right '#[fg=yellow]#(cut -d " " -f 1-3 /proc/loadavg)#[default] #[fg=blue]%H:%M#[default]'
#### statusbar ####
#set -g status-interval 1
#set -g status-justify centre # center align window list
#set -g status-left '#[fg=green] #H #[default]'
#set -g status-right '#[fg=blue,bright]Up#(uptime | cut -f 4-5 -d " " | cut -f 1 -d ",") #[default]:: #[fg=cyan]#(date +%Y-%m-%d) #[default]:: #[fg=cyan]#(date +%H:%M) '
#set -g status-right '#[fg=blue,bright]Up#(uptime | cut -f 4-5 -d " " | cut -f 1 -d ",") #[default]:: #[fg=cyan]#(cut -d " " -f 1-4 /proc/loadavg) #[default]#(date +%y-%m-%d) #[default]#(data %H%M) '

## default statusbar colors
#set -g status-fg white
#set -g status-bg default
#set -g status-attr bright

## default window title colors
#set-window-option -g window-status-fg white
#set-window-option -g window-status-bg default
#set-window-option -g window-status-attr dim

## active window title colors
#set-window-option -g window-status-current-fg white
#set-window-option -g window-status-current-bg default
#set-window-option -g window-status-current-attr bright

## command/message line colors
#set -g message-fg white
#set -g message-bg black
#set -g message-attr bright
#
# wm window title string (uses statusbar variables)
#set -g set-titles-string "tmux:#I #W"
#####
#
# give me powerline
# if-shell 'test -f ~/.local/lib/python3.3/site-packages/powerline/bindings/tmux/powerline.conf' 'source ~/.local/lib/python3.3/site-packages/powerline/bindings/tmux/powerline.conf' 
